<?php
/**
 * @file
 * Code for the F.A.Q feature.
 */

include_once('f_a_q.features.inc');

function f_a_q_init(){
}

/*
* hook_views_pre_render
*/
function f_a_q_views_pre_render(&$view) {
  if($view->name == 'faq') {
    //add a bit of jQuery to make it work
	drupal_add_js(drupal_get_path('module', 'f_a_q') .'/faq.js');
	
	//Build extra menu item for this view
	$output= '<ul>';
	$output.= '<li class="faq_expand">'.t('Expand all').'</li>';
	$output.= '<li class="faq_collapse">'.t('Collapse all').'</li>';	
	//Check permission
	 if (user_access('administer nodes')) {
		$output.= '<li class="add_content">'.l(t('create a new FAQ'),'node/add/f-a-q').'</li>';
	}
	$output.= '</ul>';
	
	//add menu to the exsiting  header
    $view->header['area']->options['content'] = $view->header['area']->options['content'] . $output;
  }
}

function f_a_q_disable() {
  _disable_content_type('f_a_q');
}
